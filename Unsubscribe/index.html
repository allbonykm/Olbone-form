<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ˜ì‹ ê±°ë¶€ ì™„ë£Œ - ì˜¬ë³¸í•œì˜ì›</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 400px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        h1 {
            color: #333;
            font-size: 22px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .message {
            color: #666;
            font-size: 15px;
            line-height: 1.7;
            margin-bottom: 25px;
        }

        .clinic-name {
            color: #667eea;
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .contact {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .contact-text {
            font-size: 13px;
            color: #888;
            margin-bottom: 8px;
        }

        .phone {
            font-size: 18px;
            color: #333;
            font-weight: 600;
            text-decoration: none;
        }

        .phone:hover {
            color: #667eea;
        }

        .footer {
            margin-top: 25px;
            font-size: 12px;
            color: #aaa;
        }
    </style>
    <!-- Google Apps Script ì—°ë™ -->
    <script>
        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ì „í™”ë²ˆí˜¸ ì¶”ì¶œ
        function getPhoneFromUrl() {
            const params = new URLSearchParams(window.location.search);
            return params.get('phone') || params.get('p') || '';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìˆ˜ì‹ ê±°ë¶€ ë¡œê·¸ ì „ì†¡
        window.onload = function () {
            const phone = getPhoneFromUrl();

            // Google Apps Script Web App URL (ìˆ˜ì‹ ê±°ë¶€ ë¡œê·¸ìš©)
            // TODO: Google Apps Script ë°°í¬ í›„ ì•„ë˜ URL êµì²´
            const SCRIPT_URL = 'https://script.google.com/macros/s/ì—¬ê¸°ì—_ìŠ¤í¬ë¦½íŠ¸_ID_ì…ë ¥/exec';

            if (phone) {
                // ì „í™”ë²ˆí˜¸ê°€ ìˆìœ¼ë©´ ë¡œê·¸ ì „ì†¡
                const logData = {
                    action: 'unsubscribe',
                    phone: phone,
                    timestamp: new Date().toLocaleString('ko-KR', { timeZone: 'Asia/Seoul' }),
                    type: 'long15'
                };

                // Google Sheetsì— ë¡œê·¸ ì „ì†¡ (no-corsë¡œ ì „ì†¡)
                fetch(SCRIPT_URL + '?' + new URLSearchParams(logData).toString(), {
                    method: 'GET',
                    mode: 'no-cors'
                }).then(() => {
                    console.log('ìˆ˜ì‹ ê±°ë¶€ ë¡œê·¸ ì „ì†¡ ì™„ë£Œ');
                }).catch(err => {
                    console.log('ë¡œê·¸ ì „ì†¡ ì‹¤íŒ¨:', err);
                });

                // ì „í™”ë²ˆí˜¸ ë§ˆìŠ¤í‚¹ í‘œì‹œ (ì„ íƒ)
                const masked = phone.replace(/(\d{3})(\d{4})(\d{4})/, '$1-****-$3');
                document.getElementById('phone-display').textContent = masked;
                document.getElementById('phone-info').style.display = 'block';
            }
        };
    </script>
</head>

<body>
    <div class="container">
        <div class="icon">âœ…</div>
        <h1>ìˆ˜ì‹ ê±°ë¶€ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤</h1>

        <div class="message">
            ì•ìœ¼ë¡œ ì¥ê¸°ë¯¸ë‚´ì› ì•ˆë‚´ ì•Œë¦¼í†¡ì„<br>
            ë°›ì§€ ì•Šìœ¼ì‹œê²Œ ë©ë‹ˆë‹¤.
        </div>

        <div id="phone-info"
            style="display: none; background: #e8f5e9; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 13px; color: #2e7d32;">
            ğŸ“± <span id="phone-display"></span>
        </div>

        <div class="clinic-name">ì˜¬ë³¸í•œì˜ì›</div>

        <div class="contact">
            <div class="contact-text">ì§„ë£Œ ê´€ë ¨ ë¬¸ì˜</div>
            <a href="tel:031-304-9000" class="phone">ğŸ“ 031-304-9000</a>
        </div>

        <div class="footer">
            ê±´ê°•í•œ í•˜ë£¨ ë˜ì„¸ìš” ğŸ™
        </div>
    </div>
</body>

</html>
